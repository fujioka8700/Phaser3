---
alwaysApply: true
---

# プロジェクトルール

## 1. ドキュメント確認

システムを始める前に、必ず `docs/` ディレクトリ配下のドキュメントを確認すること。

### 確認すべきドキュメント

- `docs/requirements.md` - ゲーム要件定義書

  - ゲームの仕様、機能要件、実装フェーズを確認
  - ゲームオブジェクト、シーン、ルールを理解

- `docs/tech-stack.md` - 技術スタック

  - 使用しているフレームワーク、ライブラリ、ツールを確認
  - バージョン情報、技術選定理由を理解

- `docs/notes.md` - 開発ノート
  - 開発環境のセットアップ手順
  - その他の開発に関するメモ

### 確認のタイミング

- 新しい機能を実装する前
- バグ修正やリファクタリングを行う前
- 依存関係を追加・更新する前
- コードレビューを行う前

## 2. 依存関係のバージョン管理

フレームワークやライブラリやゲームエンジンは、**最新安定版を使用することを原則とする**。

### バージョン選定の基準

1. **最新安定版を優先**

   - 最新の安定版（Stable/LTS）を選択
   - ベータ版やアルファ版は避ける（特別な理由がある場合を除く）

2. **セキュリティアップデート**

   - セキュリティパッチが含まれる最新版を優先
   - 既知の脆弱性があるバージョンは使用しない

3. **互換性の確認**

   - 他の依存関係との互換性を確認
   - 破壊的変更（Breaking Changes）がある場合は、移行計画を立てる

4. **ドキュメントの更新**
   - バージョンを更新した場合は、`docs/tech-stack.md` を更新
   - `package.json` のバージョン情報と整合性を保つ

### バージョン指定の方法

- **推奨**: セマンティックバージョニングに従う
  - `^3.80.1` - メジャーバージョン固定、マイナー・パッチは更新可
  - `~3.80.1` - メジャー・マイナーバージョン固定、パッチのみ更新可
  - `3.80.1` - 完全固定（特別な理由がある場合のみ）

### 更新手順

1. 最新安定版の確認
2. 変更ログ（CHANGELOG）の確認
3. 破壊的変更の有無を確認
4. テスト環境での動作確認
5. 本番環境への適用

## 3. コーディング規約

- TypeScript の strict モードを有効にする
- Biome によるリンター・フォーマッターのルールに従う
- コードレビューを実施する

## 4. コミットメッセージ

- 変更内容を明確に記述する
- 日本語または英語で記述する
- 関連する Issue や PR があれば参照する

## 5. ドキュメントの更新

- コード変更に伴い、関連するドキュメントも更新する
- `docs/requirements.md` の実装フェーズを適切に更新する
- `docs/tech-stack.md` のバージョン情報を最新に保つ
